<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Merry Christmas ğŸ ğŸ„</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f0f8ff;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    flex-direction: column;
  }

  h1 { margin-bottom: 20px; color: #333; }

  .boxes { display: flex; gap: 20px; margin-top: 20px; }
  .box {
    width: 120px; height: 120px;
    background: #ffcc00;
    display: flex; justify-content: center; align-items: center;
    cursor: pointer;
    font-size: 18px; font-weight: bold;
    border-radius: 15px;
    transition: transform 0.3s, background 0.3s;
  }
  .box:hover { transform: scale(1.1); background: #ffdb4d; }

  .message { margin-top: 20px; font-size: 22px; color: #006400; font-weight: bold; }

  #username-container { display: flex; flex-direction: column; align-items: center; }
  input, button { font-size: 18px; padding: 10px; margin: 10px; }

  #gift-container { display:none; flex-direction: column; align-items: center; }
</style>
</head>
<body>

<div id="username-container">
  <h1>Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù„Ù„Ø¨Ø¯Ø¡</h1>
  <input type="text" id="username" placeholder="Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§" />
  <button onclick="start()">Ø¯Ø®ÙˆÙ„</button>
</div>

<div id="gift-container">
  <h1>Ù…ÙØ§Ø¬Ø£Ø© Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ğŸ</h1>
  <div class="boxes">
    <div class="box" onclick="selectGift(1)">ğŸ</div>
    <div class="box" onclick="selectGift(2)">ğŸ</div>
    <div class="box" onclick="selectGift(3)">ğŸ</div>
    <div class="box" onclick="selectGift(4)">ğŸ</div>
  </div>
  <div class="message" id="message"></div>
</div>

<script>

// Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ
const messages = [
  " Ø£Ø­ÙˆÙ„Ùƒ 100 Ø¬Ù†ÙŠÙ‡ğŸ",
  " ØªØ­ÙˆÙ„ÙŠ 100 Ø¬Ù†ÙŠÙ‡ğŸ",
  " Ø£Ø­ÙˆÙ„Ùƒ 200 Ø¬Ù†ÙŠÙ‡ğŸ",
  " ØªØ­ÙˆÙ„ÙŠ 200 Ø¬Ù†ÙŠÙ‡ğŸ"
];

function start() {
  const name = document.getElementById('username').value.trim();
  if (!name) return alert('Ù…Ù† ÙØ¶Ù„Ùƒ Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ');

  localStorage.setItem('username', name);

  document.getElementById('username-container').style.display = 'none';
  document.getElementById('gift-container').style.display = 'flex';

  // Ù„Ùˆ Ø§Ø®ØªØ§Ø± Ù‚Ø¨Ù„ ÙƒØ¯Ù‡
  const saved = localStorage.getItem('gift');
  if (saved) showGift(saved);
}

function selectGift(boxNum) {
  // Ù„Ùˆ Ø§Ø®ØªØ§Ø± Ù‚Ø¨Ù„ ÙƒØ¯Ù‡ â€” Ù…Ø§ÙŠÙ†ÙØ¹Ø´ ÙŠØºÙŠØ±
  if (localStorage.getItem('gift')) return;

  localStorage.setItem('gift', boxNum);
  showGift(boxNum);

  // Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ø³ÙŠØ±ÙØ± â† ÙŠØ±ÙˆØ­ Ù„Ù„Ø§Ø¯Ù…Ù† Ø¹Ù„Ù‰ Ø§Ù„ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…
  fetch('/transfer', {
    method: 'POST',
    headers: {'Content-Type': 'application/json'},
    body: JSON.stringify({
      payerName: localStorage.getItem('username'),
      amount: messages[boxNum - 1],
      note: "Ø§Ø®ØªØ§Ø± Ù‡Ø¯ÙŠØ© Ø±Ù‚Ù… " + boxNum
    })
  });
}

function showGift(n) {
  document.getElementById('message').textContent = messages[n - 1];
}

</script>

</body>
</html>
